# Лекция #1

## Виды баз данных

1. Реляционные базы данных (RDBMS):

Основаны на реляционной модели данных.
Данные представлены в виде таблиц, состоящих из строк и столбцов.
Примеры: MySQL, PostgreSQL, Oracle Database, Microsoft SQL Server.

2. Нереляционные базы данных (NoSQL):

Используются для хранения и обработки данных, не поддающихся структурированию в традиционных реляционных таблицах.
Включают документарные, ключ-значение, столбцовые и графовые базы данных.
Примеры: MongoDB (документарная), Redis (ключ-значение), Cassandra (столбцовая), Neo4j (графовая).

3. Иерархические базы данных:

Данные организованы в виде иерархии или дерева.
Пример: IMS (Information Management System).

4. Сетевые базы данных:

Данные представлены в виде сети с узлами и связями между ними.
Пример: CODASYL.

### Типы систем обработки данных:
1. OLTP (Online Transaction Processing):

Предназначены для обработки операций в реальном времени.
Основная задача - обработка транзакций, таких как добавление, обновление, удаление данных.
Ориентированы на высокую производительность и быстрый доступ к данным.
Примеры: системы управления базами данных для электронной коммерции, онлайн-банков, авиабронирования.

2. DWH (Data Warehousing):

Предназначены для анализа и отчетности.
Централизованное хранение данных из различных источников для поддержки принятия решений.
Обработка больших объемов данных, оптимизированных для аналитики.
Примеры: Amazon Redshift, Google BigQuery, Teradata.

Типы БД и систем обработки данных выбираются в зависимости от конкретных требований проекта. Реляционные базы данных обычно используются для OLTP, тогда как NoSQL и DWH - для DWH и аналитики. Однако современные технологии и подходы позволяют комбинировать различные типы БД в зависимости от конкретных потребностей и задач системы.

## Уровни проектирования
### Концептуальный уровень (Conceptual Level):

1. Описание бизнес-процессов: На этом уровне проектировщик фокусируется на понимании бизнес-потребностей и процессов организации. Основной задачей является выявление сущностей, их атрибутов и отношений между ними.
Использование моделей данных: Для описания концептуального уровня используются средства визуализации, такие как ER-диаграммы (диаграммы сущность-связь), которые помогают представить структуру данных и их взаимосвязи.
### Логический уровень (Logical Level):

2. Преобразование концептуальной модели: Здесь происходит перевод концептуальной модели в логическую. Проектировщик определяет схему базы данных, используя конкретные средства описания данных, такие как реляционная модель данных.
Таблицы, ключи, отношения: Определение таблиц, атрибутов, первичных и внешних ключей. Осуществляется выбор конкретных типов данных для каждого атрибута, а также определяются правила целостности данных.

### Физический уровень (Physical Level):

3. Оптимизация для конкретной СУБД: Проектирование базы данных под конкретную систему управления базами данных (СУБД). Определение того, как данные будут храниться на физическом уровне, выбор индексов, оптимизация запросов и т.д.
Тюнинг для производительности: Работа с индексами, фрагментацией данных и другими параметрами для оптимизации производительности системы.

## Резервное копирование

Бэкап баз данных — это процесс создания копии данных в базе данных с целью обеспечения их сохранности и возможности восстановления в случае потери данных из-за сбоев, ошибок, атак, или других чрезвычайных ситуаций. Бэкапы являются важной частью стратегии обеспечения безопасности данных. Вот некоторые ключевые аспекты бэкапов баз данных:

1. Типы бэкапов:
Полные бэкапы (Full Backups): Копия всех данных в базе данных. Обеспечивает полную восстанавливаемость.
   Инкрементальные бэкапы (Incremental Backups): Сохраняют только изменения, произошедшие с момента последнего полного или инкрементального бэкапа.
   Дифференциальные бэкапы (Differential Backups): Сохраняют изменения, произошедшие с последним полным бэкапом, но не с последним дифференциальным.
2. Частота бэкапов:
   Регулярные резервные копии: Периодические бэкапы, обычно ежедневные, недельные или в более короткие промежутки времени в зависимости от требований безопасности и чувствительности данных.
   Точечные (On-Demand) бэкапы: Создаются вручную по мере необходимости, например, перед выполнением крупных обновлений или изменений в структуре базы данных.
3. Хранение бэкапов:
   Локальное хранение: На том же сервере, что и база данных. Доступ к данным быстрый, но может быть уязвим для сбоев оборудования или катастроф.
   Удаленное хранение: На удаленном сервере или в облаке. Обеспечивает защиту от физических угроз на месте, но требует более долгого времени для восстановления.
4. Стратегии восстановления:
   Восстановление к последнему полному бэкапу: Простая, но может потребовать больше времени на восстановление, особенно если были сделаны многочисленные изменения с момента последнего полного бэкапа.
   Восстановление с использованием инкрементальных или дифференциальных бэкапов: Более быстрый процесс восстановления, так как восстанавливается только недостающая информация.
5. Тестирование восстановления:
   Важность тестирования: Регулярное тестирование процесса восстановления для обеспечения его эффективности и минимизации времени простоя в случае реального инцидента.
6. Автоматизация и мониторинг:
   Автоматизация бэкапов: Использование автоматизированных средств для создания и управления бэкапами в установленное время.
   Мониторинг: Регулярное отслеживание состояния бэкапов и предпринятие мер на основе результатов мониторинга.
7. Согласованность данных:
   Уровень изоляции: В зависимости от уровня изоляции транзакций в момент бэкапа, может потребоваться дополнительная работа для обеспечения согласованности данных.
8. Бэкапы в облачном окружении:
   Управление безопасностью: Обеспечение безопасности бэкапов, хранящихся в облаке, таких как шифрование данных.
   Бэкапы баз данных являются ключевым элементом стратегии обеспечения безопасности данных. Они обеспечивают не только защиту от потери данных, но и возможность быстрого восстановления в случае необходимости. Основное внимание следует уделять выбору оптимальной стратегии бэкапов в соответствии с требованиями бизнеса и характером данных.

## Масштабирование

Масштабирование баз данных — это процесс увеличения её производительности и способности обрабатывать большие объемы данных. Существует два основных типа масштабирования: вертикальное (или масштабирование вверх) и горизонтальное (или масштабирование вширь).

### Вертикальное масштабирование (Scaling Up):
1. Добавление ресурсов на один уровень:

Повышение производительности за счет увеличения вычислительной мощности, объема памяти или других ресурсов на одном сервере.
Обычно реализуется на более мощных серверах.
2. Ограниченные возможности масштабирования:

Существует предел по максимальным ресурсам, которые можно добавить на один сервер.
Возможны проблемы с отказоустойчивостью, так как в случае сбоя сервера вся система может столкнуться с проблемами.
### Горизонтальное масштабирование (Scaling Out):
1. Распределение нагрузки между несколькими серверами:

Добавление новых серверов и распределение данных или запросов между ними.
Обычно реализуется в виде кластера серверов.
2. Бесконечные возможности масштабирования:

Можно продолжать добавлять новые сервера для увеличения производительности.
Позволяет горизонтально масштабировать систему в зависимости от роста нагрузки.
3. Повышенная отказоустойчивость:

В случае сбоя одного сервера, другие сервера могут продолжать работу.
Обеспечивает лучшую отказоустойчивость и надежность системы.
### Особенности масштабирования баз данных:
1. Шардинг (Sharding):
Процесс горизонтального масштабирования, при котором данные разделяются на части (шарды) и хранятся на разных серверах.
Каждый шард может обрабатывать свои запросы независимо.
2. Масштабирование чтения и записи:
Некоторые системы могут масштабироваться по отдельности для операций чтения и записи, что позволяет лучше оптимизировать производительность в зависимости от требований приложения.
3. Географическое масштабирование:
Распределение данных по географически удаленным центрам обработки данных для снижения задержек и повышения доступности.
4. Автоматическое масштабирование:
Использование технологий автоматического масштабирования для динамического добавления или уменьшения ресурсов в зависимости от текущей нагрузки.
5. Обеспечение согласованности данных:
При горизонтальном масштабировании необходимо уделять внимание обеспечению согласованности данных между различными частями системы.
Выбор масштабирования зависит от конкретных требований проекта, бизнес-потребностей и характера данных. Комбинация вертикального и горизонтального масштабирования может использоваться для достижения оптимальных результатов.

## Репликация
Репликация баз данных — это процесс создания и поддержания копии базы данных, называемой репликой, на другом сервере или в другом месте. Репликация предоставляет несколько преимуществ, таких как повышение производительности, обеспечение отказоустойчивости, а также возможность распределенной обработки запросов. Вот основные аспекты репликации баз данных:

1. Типы репликации:
   Снимок (Snapshot): Копия всей базы данных создается в определенный момент времени. При обновлении снимка все данные заново копируются.
   Транзакционная (Transactional): Изменения в базе данных передаются по мере их возникновения в виде транзакций. Обеспечивает более актуальные данные.
   Мержинг (Merge): Объединение изменений, произошедших как на мастере, так и на реплике. Используется в распределенных системах.
2. Роли в репликации:
   Мастер (Master): Основная база данных, откуда происходят все изменения и которая передает данные репликам.
   Реплика (Replica): Копия данных, получаемая из мастера и используемая для чтения или резервного копирования.
3. Преимущества репликации:
   Увеличение производительности: Разделение нагрузки между мастером и репликами позволяет более эффективно обрабатывать запросы.
   Отказоустойчивость: В случае сбоя мастера, реплика может быть использована для обеспечения доступности данных.
   Географическое распределение: Данные могут быть распределены географически для снижения задержек и улучшения доступности.
4. Асинхронная и синхронная репликация:
   Асинхронная: Мастер продолжает работу независимо от того, завершилась ли передача данных на реплику. Это обеспечивает более высокую производительность, но может привести к небольшой задержке данных на реплике.
   Синхронная: Мастер ждет подтверждения от реплики о получении данных, что гарантирует согласованность данных между мастером и репликой, но может повлиять на производительность.
5. Конфликты в репликации:
   В случае синхронной или мержинговой репликации, где изменения происходят на обеих сторонах, могут возникнуть конфликты. Обработка конфликтов требует внимательного контроля и управления.
6. Сценарии применения:
   Улучшение производительности: Распределение запросов между серверами для балансировки нагрузки.
   Отказоустойчивость: Обеспечение доступности данных в случае сбоя сервера.
   Географическое распределение: Размещение данных ближе к конечным пользователям для снижения задержек.
   Репликация — это мощный инструмент для улучшения производительности и отказоустойчивости системы баз данных. Однако, необходимо тщательно управлять процессом репликации, особенно в условиях изменения данных на нескольких узлах, чтобы избежать конфликтов и обеспечить согласованность данных.

## Версионирование

Версионирование баз данных — это процесс отслеживания изменений в структуре и данных базы данных с течением времени. Версионирование позволяет управлять эволюцией схемы базы данных, внесение изменений в структуру таблиц и отслеживание, как эти изменения влияют на уже существующие данные. Вот некоторые ключевые аспекты версионирования баз данных:

1. Сценарии применения:
   Эволюция схемы:
2. Развитие структуры базы данных с течением времени в ответ на изменения требований бизнеса.
   Развертывание обновлений: Применение изменений к базе данных без потери данных и без длительных периодов простоя системы.
2. Инструменты версионирования:
   Миграции баз данных: Скрипты, описывающие изменения в структуре базы данных и применяемые последовательно для обновления версии.
   ORM (Object-Relational Mapping): Некоторые ORM-фреймворки предоставляют средства для версионирования баз данных, автоматически создавая и применяя миграции.
3. Схема и данные:
   Версионирование схемы: Изменения в структуре таблиц, добавление, изменение или удаление столбцов.
   Версионирование данных: Отслеживание изменений в содержимом таблиц, таких как вставка, обновление или удаление записей.
4. Сохранение совместимости:
   Обратная совместимость: Возможность новой версии программного обеспечения работать с более старой версией базы данных без проблем.
   Вперед совместимость: Возможность старой версии программного обеспечения работать с более новой версией базы данных.
5. Версионирование данных:
   Хранилище версий: Ведение истории изменений данных, чтобы можно было вернуться к предыдущим состояниям.
   Таймстемпы и журналирование: Фиксация времени и причины изменений для более точного отслеживания.
6. Операционные задачи:
   Применение миграций: Процесс обновления базы данных с учетом изменений в структуре и данных.
   Откат миграций: Возможность откатить изменения, например, в случае проблем с новой версией.
7. Процесс разработки:
   Создание и тестирование миграций: Разработчики создают и тестируют миграции перед их применением в боевой среде.
   Контроль версий миграций: Использование систем контроля версий для управления миграциями и отслеживания изменений.
8. Проблемы и решения:
   Конфликты миграций: В случае коллизий между изменениями, требуется механизм разрешения конфликтов.
   Управление данными: Эффективное управление данными, особенно при версионировании данных.
   Версионирование баз данных является важным аспектом жизненного цикла базы данных и обеспечивает эффективное управление ее изменениями. Хорошо организованный процесс версионирования помогает избежать проблем совместимости, обеспечивает отслеживаемость изменений и обеспечивает устойчивость системы при эволюции бизнес-требований.

