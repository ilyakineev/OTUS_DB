Скрипты  

[Скрипты создания схемы и таблиц БД](../hw02/postgreSqlScript.sql)

## 1. Проводим анализ возможных запросов\отчетов\поиска данных.
### 1.1 Для склада основными сценариями будут следующие запросы:
* CRUD операции со складом.
### 1.2 Для таблицы "Номенклатурная позиция" основными сценариями будут следующие запросы:
* CRU номенклатуры
### 1.3 Для таблицы "Производитель" основными сценариями будут следующие запросы:
* CRUD операции Производитель
### 1.4 Для таблицы "Сотрудник" основными сценариями будут следующие запросы:
* CRUD операции Сотрудник
### 1.5 Для таблицы "Поставщик" основными сценариями будут следующие запросы:
* CRUD операции Поставщик
### 1.6 Для таблицы "Должность" основными сценариями будут следующие запросы:
* CRUD операции Должность
### 1.7 Для таблицы "История номенклатурной позиции" основными сценариями будут следующие запросы:
* CR операции с историей номенклатурной позиции

## 2. Предполагаем возможную кардинальность поля:
### 2.1. Склад - composition
* _name_ - Имя склада
### 2.2. Номенклатурная позиция - item
* _catalogue_number_ - Каталожный номер
### 2.3. Производитель - manufacturer
* _phone_ - Контактный телефон
### 2.4. Сотрудник - worker
* _name_ - Имя сотрудника
* _phone_ - Контактный телефон
### 2.5. Статус номенклатурной позиции - status
* _name_ - Имя статуса
### 2.6. Поставщик - provider
* _name_ - Имя поставщика
* _phone_ - Контактный телефон
### 2.7. Должность - position
* _position_ - Должность
### 2.8. История номенклатурной позиции - item_history
* _fk_operation_ - Идентификатор операция
* _fk_item_ - Идентификатор номенклатурной позиции
### 2.9. Операция с номенклатурной позицией - operation
* _name_ - Наименование операции
### 2.10. Операция с номенклатурной позицией - role
* _name_ - Наименование роли

## 3. Создаем дополнительные индексы - простые или композитные.
### 3.1. Номенклатурная позиция - item
* _catalogue_number_ - Каталожный номер
### 3.2. Сотрудник - worker
* _name_ - Имя сотрудника
### 3.3. История номенклатурной позиции - item_history
* _fk_operation_ - Идентификатор операции
* _fk_item_ - Идентификатор номенклатурной позиции

## 4. На каждый индекс пишем краткое описание, зачем он нужен (почему по этому полю\полям).
### 4.1. Номенклатурная позиция - item
* _catalogue_number_ - Каталожный номер
* CREATE INDEX item_idx ON item (catalogue_number);
Выбран, так как имеет наиболее высокую кардинальность поля. В перспективе при добавлении новых полей индекс будет пересмотрен.
### 4.2 Сотрудник - worker
* _name_ - Имя сотрудника
CREATE INDEX worker_idx ON worker (name);
Если расширить поле name на Ф.И.О, то будет перспективным для индекса.

## 5. Думаем, какие логические ограничения в БД нужно добавить - например, какие поля должны быть уникальны, в какие нужно добавить условия, чтобы не нарушить бизнес-логику. Пример: нельзя провести операцию по переводу средств на отрицательную сумму.
* Так как поддержка ограничений на БД сложнее, чем поддержка на БЭ, было решено отказаться от дополнительных ограничений через ключевое слово check.

## 6. Создаем ограничения по выбранным полям.
### 1. Склад - composition
* _id_ - Идентификатор записи, serial NOT NULL
* _name_ - Имя склада, VARCHAR(255) NOT NULL (Поле, обязательное для заполнения)
* _address_ - Aдрес, TEXT NOT NULL (Поле, обязательное для заполнения)
* _description_ - Описание, TEXT

### 2. Номенклатурная позиция - item
* _id_ - Идентификатор записи, serial NOT NULL
* _catalogue_number_ - Каталожный номер, VARCHAR(255) NOT NULL
* _name_ - Наименование, VARCHAR(255) NOT NULL UNIQUE (Уникальное поле для обязательного заполнения)
* _fk_manufacturer_ - Идентификатор производителя, INTEGER NOT NULL (Внешний ключ, обязательный для заполнения)
* _fk_status_ - Статус номенклатурной позиции, INTEGER NOT NULL (Внешний ключ, обязательный для заполнения)
* _fk_provider_ - Поставщик, INTEGER NOT NULL (Внешний ключ, обязательный для заполнения)
* _fk_composition_ - Поставщик, INTEGER NOT NULL (Внешний ключ, обязательный для заполнения)
* _description_ - Описание, TEXT

### 3. Производитель - manufacturer
* _id_ - Идентификатор записи, serial NOT NULL 
* _name_ - Имя склада, VARCHAR(255) NOT NULL (Поле, обязательное для заполнения)
* _phone_ - Контактный телефон, VARCHAR(255) NOT NULL UNIQUE (Уникальное поле для обязательного заполнения)
* _address_ - Aдрес, TEXT NOT NULL (Поле, обязательное для заполнения)
* _description_ - Описание, TEXT

### 4. Сотрудник - worker
* _id_ - Идентификатор записи, serial NOT NULL
* _name_ - Имя сотрудника, VARCHAR(255) NOT NULL (Поле обязательное для заполнения)
* _fk_position_ - Идентификатор должности, INTEGER NOT NULL (Внешний ключ, обязательный для заполнения)
* _phone_ - Контактный телефон, VARCHAR(255) NOT NULL UNIQUE (Уникальное поле для обязательного заполнения)

### 5. Статус номенклатурной позиции - status
* _id_ - Идентификатор записи, serial NOT NULL
* _name_ - Имя статуса, VARCHAR(255) NOT NULL UNIQUE (Уникальное поле для обязательного заполнения)
* _description_ - Описание, TEXT

### 6. Поставщик - provider
* _id_ - Идентификатор записи, serial NOT NULL
* _name_ - Имя склада, VARCHAR(255) NOT NULL (Поле обязательное для заполнения)
* _phone_ - Контактный телефон, VARCHAR(255) NOT NULL UNIQUE (Уникальное поле для обязательного заполнения)
* _address_ - Адрес, TEXT NOT NULL (Поле обязательное для заполнения)
* _description_ - Описание, TEXT

### 7. Должность - position
* _id_ - Идентификатор записи, serial NOT NULL
* _position_ - Должность, VARCHAR(255) NOT NULL (Поле обязательное для заполнения)
* _description_ - Описание, TEXT

### 8. История номенклатурной позиции - item_history
* _id_ - Идентификатор записи, serial NOT NULL
* _fk_operation_ - Идентификатор операция, INTEGER NOT NULL (Внешний ключ обязательный для заполнения)
* _fk_item_ - Идентификатор номенклатурной позиции, INTEGER NOT NULL (Внешний ключ обязательный для заполнения)
* _fk_worker_ - Идентификатор сотрудника, INTEGER NOT NULL (Внешний ключ обязательный для заполнения)
* _time_ - Время выполнения операции, DATE NOT NULL (Поле обязательное для заполнения)

### 9. Операция над номенклатурной позицией - operation
* _id_ - Идентификатор записи, serial NOT NULL
* _name_ - Наименование операции, VARCHAR(255) NOT NULL UNIQUE (Уникальное поле для обязательного заполнения)
* _description_ - Описание, TEXT

### 10. Операция над номенклатурной позицией - role
* _id_ - Идентификатор записи, serial NOT NULL
* _name_ - Наименование роли, VARCHAR(255) NOT NULL UNIQUE (Уникальное поле для обязательного заполнения)
* _description_ - Описание, TEXT

